# ğŸŒ Cloudflare Worker åœ¨çº¿ç¯å¢ƒæµ‹è¯•æŠ¥å‘Š (Online)

## ğŸ“Š æµ‹è¯•æ¦‚è§ˆ

**æµ‹è¯•æ—¶é—´**: 2025/09/20 17:57:52
**æµ‹è¯•ç¯å¢ƒ**: åœ¨çº¿ç¯å¢ƒ (beta.plaud.ai)
**æµ‹è¯•æ–‡ä»¶**: online-routing.test.ts
**æ€»æµ‹è¯•æ•°**: 36
**é€šè¿‡**: 36 âœ…
**å¤±è´¥**: 0 âŒ
**è·³è¿‡**: 0 â­ï¸
**æˆåŠŸç‡**: 100.0%

## ğŸŒ åœ¨çº¿ç¯å¢ƒé…ç½®

- **åŸŸå**: beta.plaud.ai (å…¬æµ‹ç¯å¢ƒ)
- **æ—§ç‰ˆæœ¬èµ„æº**: plaud-web-dist.pages.dev (æ—§é¡¹ç›®)
- **æ–°ç‰ˆæœ¬èµ„æº**: plaud-web3.pages.dev (æ–°é¡¹ç›®)
- **é»˜è®¤ç°åº¦**: 100% (å‡çº§ç­–ç•¥)
- **åŠ«æŒåŸŸå**: beta.plaud.ai (å›ºå®šåŠ«æŒ)

## ğŸ¯ æµ‹è¯•çŠ¶æ€

ğŸ‰ **æ‰€æœ‰åœ¨çº¿æµ‹è¯•é€šè¿‡ï¼**

## ğŸ“‹ è¯¦ç»†ç»“æœ

### ğŸ“ online-routing.test.ts

#### online.hashStringToPercentage - åœ¨çº¿ç¯å¢ƒå“ˆå¸Œç®—æ³•

- âœ… **åº”è¯¥è¿”å›ä¸€è‡´çš„å“ˆå¸Œç™¾åˆ†æ¯”** (3ä¸ª)
- âœ… **ç›¸åŒå­—ç¬¦ä¸²åº”è¯¥è¿”å›ç›¸åŒç»“æœ** (1ä¸ª)
- âœ… **åº”è¯¥è¿”å› 0-99 èŒƒå›´å†…çš„å€¼** (10ä¸ª)

#### buildNewPagesOrigin - åœ¨çº¿åŸŸåæ„å»º

- âœ… **åº”è¯¥å¤„ç† beta.plaud.ai å­åŸŸå** (2ä¸ª)
- âœ… **åº”è¯¥ç»Ÿä¸€æ˜ å°„åˆ°æ–°ç‰ˆæœ¬åŸŸå** (5ä¸ª)

#### Online Routing Logic (beta.plaud.ai åœ¨çº¿ç¯å¢ƒ) â€º åœ¨çº¿è·¯ç”±é€»è¾‘æµ‹è¯• - beta.plaud.ai åŸŸå

| è®¿é—®åœ°å€ | æµ‹è¯•åœºæ™¯ | ç”¨æˆ·æ ‡è¯† | x-pld-env | ç°åº¦% | ç»“æœåœ°å€ | å‘½ä¸­ç°åº¦ | çŠ¶æ€ | æ–­è¨€ |
|----------|---------|----------|-----------|-------|----------|----------|------|---------|
| beta.plaud.ai/* | åœ¨çº¿ç¯å¢ƒé»˜è®¤100%ç°åº¦ - æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨æ–°ç‰ˆæœ¬ | - | - | 0% | plaud-web3.pages.dev | ğŸŒ åœ¨çº¿ç¯å¢ƒ | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | åœ¨çº¿ç¯å¢ƒ10%ç°åº¦ - é«˜å“ˆå¸Œç”¨æˆ·ä¸å‘½ä¸­æ–°ç‰ˆæœ¬ | beta_user789 | - | 10% | plaud-web-dist.pages.dev | âŒ æœªå‘½ä¸­ (34% > 10%) | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | åœ¨çº¿ç¯å¢ƒ40%ç°åº¦ - ä½å“ˆå¸Œç”¨æˆ·å‘½ä¸­æ–°ç‰ˆæœ¬ | beta_user789 | - | 40% | plaud-web3.pages.dev | âœ… å‘½ä¸­ (34% < 40%) | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | æ²¡æœ‰å®¢æˆ·ç«¯æ ‡ç­¾åº”è¯¥é»˜è®¤æ–°ç‰ˆæœ¬ - 50%ç°åº¦ | - | - | 50% | plaud-web3.pages.dev | âœ… é»˜è®¤æ–°ç‰ˆæœ¬ | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | æ²¡æœ‰å®¢æˆ·ç«¯æ ‡ç­¾åº”è¯¥é»˜è®¤æ–°ç‰ˆæœ¬ - 0%ç°åº¦ | - | - | 0% | plaud-web3.pages.dev | âœ… é»˜è®¤æ–°ç‰ˆæœ¬ | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | æ²¡æœ‰å®¢æˆ·ç«¯æ ‡ç­¾åº”è¯¥é»˜è®¤æ–°ç‰ˆæœ¬ - 100%ç°åº¦ | - | - | 0% | plaud-web3.pages.dev | âœ… é»˜è®¤æ–°ç‰ˆæœ¬ | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | ç©ºCookieå¤´åº”è¯¥é»˜è®¤æ–°ç‰ˆæœ¬ | - | - | 30% | plaud-web3.pages.dev | âœ… é»˜è®¤æ–°ç‰ˆæœ¬ | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | åªæœ‰å…¶ä»–Cookieæ²¡æœ‰x-pld-tagåº”è¯¥é»˜è®¤æ–°ç‰ˆæœ¬ | - | - | 25% | plaud-web3.pages.dev | âœ… é»˜è®¤æ–°ç‰ˆæœ¬ | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | x-pld-tagä¸ºç©ºå€¼åº”è¯¥é»˜è®¤æ–°ç‰ˆæœ¬ | - | - | 10% | plaud-web3.pages.dev | âœ… é»˜è®¤æ–°ç‰ˆæœ¬ | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | åœ¨çº¿ç¯å¢ƒ5%ç°åº¦ - æä½å“ˆå¸Œç”¨æˆ·æ‰å‘½ä¸­æ–°ç‰ˆæœ¬ | user789 | - | 5% | plaud-web-dist.pages.dev | âŒ æœªå‘½ä¸­ (15% > 5%) | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | åœ¨çº¿ç¯å¢ƒ20%ç°åº¦ - ä½å“ˆå¸Œç”¨æˆ·å‘½ä¸­æ–°ç‰ˆæœ¬ | user789 | - | 20% | plaud-web3.pages.dev | âœ… å‘½ä¸­ (15% < 20%) | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | åœ¨çº¿ç¯å¢ƒ75%ç°åº¦ - ä¸­ç­‰å“ˆå¸Œç”¨æˆ·å‘½ä¸­æ–°ç‰ˆæœ¬ | user123 | - | 75% | plaud-web3.pages.dev | âœ… å‘½ä¸­ (73% < 75%) | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | åœ¨çº¿ç¯å¢ƒ70%ç°åº¦ - é«˜å“ˆå¸Œç”¨æˆ·ä¸å‘½ä¸­æ–°ç‰ˆæœ¬ | beta_user123 | - | 70% | plaud-web-dist.pages.dev | âŒ æœªå‘½ä¸­ (76% > 70%) | âœ… | 1ä¸ª |

#### Online Routing Logic (beta.plaud.ai åœ¨çº¿ç¯å¢ƒ) â€º åœ¨çº¿åŸŸåæ˜ å°„æµ‹è¯• - beta.plaud.ai ç¯å¢ƒ

| è®¿é—®åœ°å€ | æµ‹è¯•åœºæ™¯ | ç”¨æˆ·æ ‡è¯† | x-pld-env | ç°åº¦% | ç»“æœåœ°å€ | å‘½ä¸­ç°åº¦ | çŠ¶æ€ | æ–­è¨€ |
|----------|---------|----------|-----------|-------|----------|----------|------|---------|
| beta.plaud.ai/dashboard | è®¿é—® beta.plaud.ai åº”è¯¥è¿”å› plaud-web3.pages.dev | beta_user789 | - | 40% | plaud-web3.pages.dev | âœ… å‘½ä¸­ (34% < 40%) | âœ… | 1ä¸ª |
| app.plaud.ai/profile | è®¿é—® app.plaud.ai åº”è¯¥è¿”å› plaud-web3.pages.dev | beta_user789 | - | 40% | plaud-web3.pages.dev | âœ… å‘½ä¸­ (34% < 40%) | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | é«˜å“ˆå¸Œç”¨æˆ·è®¿é—® beta.plaud.ai åº”è¯¥è¿”å›æ—§ç‰ˆæœ¬åŸŸå | beta_user789 | - | 40% | plaud-web3.pages.dev | âœ… å‘½ä¸­ (34% < 40%) | âœ… | 1ä¸ª |
| beta.plaud.ai/* | å¤æ‚å­åŸŸåæµ‹è¯• - admin.api.plaud.ai | - | - | 0% | plaud-web3.pages.dev | ğŸŒ åœ¨çº¿ç¯å¢ƒ | âœ… | 1ä¸ª |
| beta.plaud.ai/* | å¸¦æŸ¥è¯¢å‚æ•°çš„URLåº”è¯¥ä¿æŒå‚æ•° | - | - | 0% | plaud-web3.pages.dev | ğŸŒ åœ¨çº¿ç¯å¢ƒ | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | æ²¡æœ‰ç”¨æˆ·æ ‡è¯†è®¿é—® beta.plaud.ai åº”è¯¥è¿”å›æ–°ç‰ˆæœ¬åŸŸå | - | - | 5% | plaud-web3.pages.dev | âœ… é»˜è®¤æ–°ç‰ˆæœ¬ | âœ… | 1ä¸ª |
| app.plaud.ai/profile | æ²¡æœ‰ç”¨æˆ·æ ‡è¯†è®¿é—® app.plaud.ai åº”è¯¥è¿”å›æ–°ç‰ˆæœ¬åŸŸå | - | - | 5% | plaud-web3.pages.dev | âœ… é»˜è®¤æ–°ç‰ˆæœ¬ | âœ… | 1ä¸ª |

#### Online Routing Logic (beta.plaud.ai åœ¨çº¿ç¯å¢ƒ) â€º åœ¨çº¿ç°åº¦å‘å¸ƒåœºæ™¯æµ‹è¯•

| è®¿é—®åœ°å€ | æµ‹è¯•åœºæ™¯ | ç”¨æˆ·æ ‡è¯† | x-pld-env | ç°åº¦% | ç»“æœåœ°å€ | å‘½ä¸­ç°åº¦ | çŠ¶æ€ | æ–­è¨€ |
|----------|---------|----------|-----------|-------|----------|----------|------|---------|
| beta.plaud.ai/test | 0%ç°åº¦ - æ‰€æœ‰ç”¨æˆ·éƒ½ä½¿ç”¨æ—§ç‰ˆæœ¬ | beta_user_a~c | - | 0% | plaud-web-dist.pages.dev | âŒ å…¨éƒ¨æ—§ç‰ˆæœ¬ | âœ… | 3ä¸ª |
| beta.plaud.ai/* | 5%ç°åº¦ - æå°‘æ•°ç”¨æˆ·å‘½ä¸­æ–°ç‰ˆæœ¬ | - | - | 0% | plaud-web3.pages.dev | ğŸŒ åœ¨çº¿ç¯å¢ƒ | âœ… | 3ä¸ª |
| beta.plaud.ai/* | 50%ç°åº¦ - çº¦ä¸€åŠç”¨æˆ·å‘½ä¸­æ–°ç‰ˆæœ¬ | - | - | 0% | plaud-web3.pages.dev | ğŸŒ åœ¨çº¿ç¯å¢ƒ | âœ… | 15ä¸ª |
| beta.plaud.ai/test | 100%ç°åº¦ - æ‰€æœ‰ç”¨æˆ·éƒ½ä½¿ç”¨æ–°ç‰ˆæœ¬ | beta_user_x~z | - | 100% | plaud-web3.pages.dev | âœ… å…¨éƒ¨æ–°ç‰ˆæœ¬ | âœ… | 3ä¸ª |
| beta.plaud.ai/rollout | åœ¨çº¿æ¸è¿›å¼å‘å¸ƒæ¨¡æ‹Ÿ - ä»0%åˆ°100% | beta_consistent_user | - | 0%â†’100% | æ¸è¿›å¼å‘½ä¸­ | ğŸ“ˆ æ¸è¿›å¼å‘å¸ƒ | âœ… | 13ä¸ª |
| beta.plaud.ai/no-user-test | æ²¡æœ‰ç”¨æˆ·æ ‡è¯†åœ¨å„ç§ç°åº¦ä¸‹éƒ½ä½¿ç”¨æ–°ç‰ˆæœ¬ | - | - | 0%~100% | plaud-web3.pages.dev | âœ… å…¨ç°åº¦æ–°ç‰ˆæœ¬ | âœ… | 21ä¸ª |

#### Online Routing Logic (beta.plaud.ai åœ¨çº¿ç¯å¢ƒ) â€º åœ¨çº¿ç¯å¢ƒç‰¹æ®Šåœºæ™¯æµ‹è¯•

| è®¿é—®åœ°å€ | æµ‹è¯•åœºæ™¯ | ç”¨æˆ·æ ‡è¯† | x-pld-env | ç°åº¦% | ç»“æœåœ°å€ | å‘½ä¸­ç°åº¦ | çŠ¶æ€ | æ–­è¨€ |
|----------|---------|----------|-----------|-------|----------|----------|------|---------|
| beta.plaud.ai/legacy/admin | æ—§è·¯ç”±å¼ºåˆ¶ä½¿ç”¨æ—§ç‰ˆæœ¬ | beta_user789 | - | 50% | plaud-web-dist.pages.dev | ğŸ”„ æ—§è·¯ç”±ä¼˜å…ˆ | âœ… | 1ä¸ª |
| beta.plaud.ai/dashboard | é«˜å“ˆå¸Œç”¨æˆ·åœ¨ä½ç°åº¦ä¸‹åº”è¯¥ä½¿ç”¨æ—§ç‰ˆæœ¬ | beta_user123 | - | 50% | plaud-web-dist.pages.dev | âŒ æœªå‘½ä¸­ (76% > 50%) | âœ… | 1ä¸ª |
| beta.plaud.ai/legacy/settings | æ²¡æœ‰ç”¨æˆ·æ ‡è¯†è®¿é—®æ—§è·¯ç”±åº”è¯¥ä½¿ç”¨æ—§ç‰ˆæœ¬ | - | - | 100% | plaud-web-dist.pages.dev | ğŸ”„ æ—§è·¯ç”±ä¼˜å…ˆ | âœ… | 1ä¸ª |
| beta.plaud.ai/* | åº”è¯¥æ­£ç¡®å¤„ç†å¤æ‚çš„ URL | - | - | 0% | plaud-web3.pages.dev | ğŸŒ åœ¨çº¿ç¯å¢ƒ | âœ… | 1ä¸ª |
| beta.plaud.ai/* | åº”è¯¥è¿”å›å®Œæ•´çš„è°ƒè¯•ä¿¡æ¯ | - | - | 0% | plaud-web3.pages.dev | ğŸŒ åœ¨çº¿ç¯å¢ƒ | âœ… | 3ä¸ª |



## ğŸ“ é¡¹ç›®ç»“æ„

```
apps/web-worker/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ offline.worker.js                    # ç¦»çº¿ Worker é€»è¾‘ (theplaud.com)
â”‚   â”œâ”€â”€ online.worker.js                     # åœ¨çº¿ Worker é€»è¾‘ (beta.plaud.ai)
â”‚   â”œâ”€â”€ shared-logic.js                      # å…±äº«å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.ts                             # å…¥å£æ–‡ä»¶
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ routing-logic.test.ts                # ç¦»çº¿è·¯ç”±é€»è¾‘æµ‹è¯•
â”‚   â”œâ”€â”€ online-routing.test.ts               # åœ¨çº¿è·¯ç”±é€»è¾‘æµ‹è¯•
â”‚   â””â”€â”€ test-utils.ts                        # æµ‹è¯•å·¥å…·å‡½æ•°
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ generate-offline-test-report.ts      # ç¦»çº¿æµ‹è¯•æŠ¥å‘Šç”Ÿæˆå™¨
â”‚   â””â”€â”€ generate-online-test-report.ts       # åœ¨çº¿æµ‹è¯•æŠ¥å‘Šç”Ÿæˆå™¨
â”œâ”€â”€ cloudflare-worker-offline.js             # ç¦»çº¿å®Œæ•´ Worker
â”œâ”€â”€ cloudflare-worker-online.js              # åœ¨çº¿å®Œæ•´ Worker
â””â”€â”€ reports/
    â”œâ”€â”€ latest-test-report.md                # ç¦»çº¿æµ‹è¯•æŠ¥å‘Š
    â””â”€â”€ online-test-report.md                # åœ¨çº¿æµ‹è¯•æŠ¥å‘Š
```

## ğŸ”§ åœ¨çº¿ç¯å¢ƒç‰¹æ€§

### ğŸ¯ è·¯ç”±é€»è¾‘
- **ç°åº¦å‘å¸ƒ**: åŸºäºç”¨æˆ·æ ‡è¯†çš„å“ˆå¸Œå€¼è¿›è¡Œæµé‡åˆ†é…
- **åŸŸåæ˜ å°„**: beta.plaud.ai -> plaud-web3.pages.dev (æ–°ç‰ˆæœ¬) / plaud-web-dist.pages.dev (æ—§ç‰ˆæœ¬)
- **å›ºå®šåŠ«æŒ**: åªå¤„ç† beta.plaud.ai/* è·¯å¾„ï¼Œç»Ÿä¸€æ˜ å°„åˆ°æ–°ç‰ˆæœ¬åŸŸå

### ğŸ›¡ï¸ å‡çº§ç­–ç•¥
- **å…¨é¢å‡çº§**: é»˜è®¤100%ç°åº¦ï¼Œå…¨é‡ä½¿ç”¨æ–°ç‰ˆæœ¬
- **çµæ´»æ§åˆ¶**: æ”¯æŒè°ƒæ•´ç°åº¦ç™¾åˆ†æ¯”è¿›è¡Œç²¾ç»†æ§åˆ¶
- **å¿«é€Ÿå›æ»š**: å¯å¿«é€Ÿè°ƒæ•´ç°åº¦ç™¾åˆ†æ¯”è¿›è¡Œå›æ»š
- **ç¯å¢ƒéš”ç¦»**: åœ¨çº¿ç¯å¢ƒç‹¬ç«‹é…ç½®

### ğŸ§ª æµ‹è¯•è¦†ç›–
- å“ˆå¸Œç®—æ³•ä¸€è‡´æ€§æµ‹è¯•
- Cookie è§£æåŠŸèƒ½æµ‹è¯•
- åŸŸåæ„å»ºé€»è¾‘æµ‹è¯•
- å®Œæ•´è·¯ç”±æµç¨‹æµ‹è¯•
- ç°åº¦å‘å¸ƒåœºæ™¯æµ‹è¯•
- ç¯å¢ƒå¤´ä¼˜å…ˆçº§æµ‹è¯•
- ç™½åå•åŸŸåæµ‹è¯•
- æ¸è¿›å¼å‘å¸ƒæ¨¡æ‹Ÿ

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2025/09/20 17:57:52*
*æµ‹è¯•æ¡†æ¶: Jest | ç¯å¢ƒ: åœ¨çº¿ (beta.plaud.ai)*
